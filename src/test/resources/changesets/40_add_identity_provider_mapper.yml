id: add_identity_provider_mapper
author: istrauch
realm: integ-test
changes:
  - addIdentityProvider:
      alias: testAlias2
      providerId: saml
      trustEmail: true
      storeToken: true
      config:
        hideOnLoginPage: true
        backchannelSupported: true
        authorizationUrl: https://authUrl
        tokenUrl: https://tokenUrl
        clientId: clientId
        clientSecret: clientSecret
  - addIdentityProviderMapper:
      identityProviderAlias: testAlias2
      name: testGenericMapper
      identityProviderMapper: saml-user-attribute-idp-mapper
      config:
        "attribute.name": http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name
        "user.attribute": nameAttributeInSaml
  - addSamlMapper:
      identityProviderAlias: testAlias2
      name: testGenericMapperWithCheckOfUnderlyingIdpType
      identityProviderMapper: saml-user-attribute-idp-mapper
      config:
        "attribute.name": http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name
        "user.attribute": nameAttributeInSaml
  - addSamlEmailAddressAttributeMapper:
      identityProviderAlias: testAlias2
      name: testEmailMapper
      attributeName: email
  - addSamlNameAttributeMapper:
      identityProviderAlias: testAlias2
      name: testNameMapper
      attributeName: name
  - addSamlGivenNameAttributeMapper:
      identityProviderAlias: testAlias2
      name: testGivenNameMapper
      attributeName: givenName
  - addSamlSurnameAttributeMapper:
      identityProviderAlias: testAlias2
      name: testSurnameMapper
      attributeName: surname
  - addSamlRoleMapper:
      identityProviderAlias: testAlias2
      name: testRoleMapper
      attributeValue: sourceRole
      role: targetRole
  - deleteIdentityProvider:
      alias: testAlias2
